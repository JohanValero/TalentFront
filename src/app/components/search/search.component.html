<div class="search-container" [class.searching]="isSearching || (result_of_candidates && result_of_candidates.result.length > 0)">
    <div class="search-box">
        <mat-form-field appearance="outline">
            <input matInput
                   [(ngModel)]="searchTerm"
                   placeholder="Buscar candidatos..."
                   (keyup.enter)="onSearch()">
            <button mat-icon-button matSuffix (click)="onSearch()">
                <mat-icon>search</mat-icon>
            </button>
        </mat-form-field>
    </div>

    <div class="results-container" *ngIf="isSearching || (result_of_candidates && result_of_candidates.result.length > 0)">
        <div class="results-scroll">
            <!-- Loading Spinner -->
            <div *ngIf="isSearching" class="loading-container">
                <mat-spinner diameter="40"></mat-spinner>
            </div>

            <!-- Results List -->
            <div *ngIf="!isSearching && result_of_candidates && result_of_candidates.result.length > 0 && !watchDetail" class="candidates-list">
                <mat-card *ngFor="let candidate of result_of_candidates.result" class="candidate-card">
                    <mat-card-header>
                        <mat-card-title>{{ candidate.json_data.nombre | uppercase }}</mat-card-title>
                        <button mat-icon-button color="primary"
                                class="view-cv-button"
                                (click)="onViewCV(candidate)">
                            <mat-icon>send</mat-icon>
                        </button>
                    </mat-card-header>
                    <mat-card-content>
                        <p class="profile-text">{{ candidate.json_data.perfil }}</p>
                        <ul>
                          <li *ngFor="let skill of candidate.matched_skills">
                            <strong>{{ skill.skill | uppercase }}</strong>: {{ skill.score | percent:'1.0-2' }}
                            <span [ngClass]="getColorClass(skill.score)" class="color-indicator"></span>
                          </li>
                        </ul>
                    </mat-card-content>
                </mat-card>
            </div>

            <!-- No Results Message -->
            <div *ngIf="!isSearching && result_of_candidates && result_of_candidates.result.length === 0 && searchTerm && !watchDetail"
                 class="no-results">
                No se encontraron candidatos para tu b√∫squeda
            </div>

            <!-- VER DETALLES -->
            <div *ngIf="watchDetail" class="justification-section">
              <p *ngIf="actualDetail"
                  class="justification-text">
                  NOMBRE: {{actualDetail.json_data?.nombre}}
              </p>
              <mat-divider></mat-divider>
                <p *ngIf="detailJustification"
                    class="justification-text">
                    {{detailJustification}}
                </p>
              <mat-progress-spinner *ngIf="isJustificationEmpty" diameter="20" mode="indeterminate"></mat-progress-spinner>
              <button mat-icon-button color="primary"
                      class="view-cv-button"
                      (click)="onBack()">
                  <mat-icon>arrow_back</mat-icon>
              </button>
            </div>

        </div>
    </div>
</div>
